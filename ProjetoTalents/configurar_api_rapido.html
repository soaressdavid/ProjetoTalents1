<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuração Rápida - API Google Maps</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .step-card {
            border: 2px solid #007bff;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            margin-bottom: 1rem;
        }
        .step-number {
            background: #007bff;
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 1rem;
        }
        .api-key-input {
            font-family: monospace;
            font-size: 0.9rem;
        }
        .success-alert {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border: 2px solid #28a745;
        }
    </style>
</head>
<body>
    <div class="container my-5">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="text-center mb-5">
                    <h1><i class="fas fa-map-marked-alt me-3"></i>Configuração Rápida da API Google Maps</h1>
                    <p class="lead">Configure sua API em poucos minutos para ter dados reais e precisos</p>
                </div>

                <!-- Status Atual -->
                <div class="alert alert-warning">
                    <h5><i class="fas fa-exclamation-triangle me-2"></i>Status Atual</h5>
                    <p class="mb-0">A API do Google Maps não está configurada. Por isso você está vendo "API não configurada" na calculadora.</p>
                </div>

                <!-- Passo 1 -->
                <div class="card step-card">
                    <div class="card-body">
                        <div class="d-flex align-items-start">
                            <div class="step-number">1</div>
                            <div class="flex-grow-1">
                                <h5>Acesse o Google Cloud Console</h5>
                                <p>Vá para o console do Google Cloud para criar sua chave de API.</p>
                                <a href="https://console.cloud.google.com/" target="_blank" class="btn btn-primary">
                                    <i class="fas fa-external-link-alt me-2"></i>Abrir Google Cloud Console
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Passo 2 -->
                <div class="card step-card">
                    <div class="card-body">
                        <div class="d-flex align-items-start">
                            <div class="step-number">2</div>
                            <div class="flex-grow-1">
                                <h5>Crie um Projeto (se necessário)</h5>
                                <p>Se você não tem um projeto, crie um novo:</p>
                                <ol>
                                    <li>Clique no nome do projeto no canto superior esquerdo</li>
                                    <li>Clique em "NOVO PROJETO"</li>
                                    <li>Digite um nome: <code>ProjetoTalents-Maps</code></li>
                                    <li>Clique em "CRIAR"</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Passo 3 -->
                <div class="card step-card">
                    <div class="card-body">
                        <div class="d-flex align-items-start">
                            <div class="step-number">3</div>
                            <div class="flex-grow-1">
                                <h5>Habilite as APIs Necessárias</h5>
                                <p>Vá em "APIs e Serviços" > "Biblioteca" e habilite:</p>
                                <div class="row">
                                    <div class="col-md-6">
                                        <ul>
                                            <li><strong>Directions API</strong> - Para calcular rotas</li>
                                            <li><strong>Geocoding API</strong> - Para converter endereços</li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6">
                                        <ul>
                                            <li><strong>Places API</strong> - Para sugestões de lugares</li>
                                            <li><strong>Maps JavaScript API</strong> - Para mapas (opcional)</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Passo 4 -->
                <div class="card step-card">
                    <div class="card-body">
                        <div class="d-flex align-items-start">
                            <div class="step-number">4</div>
                            <div class="flex-grow-1">
                                <h5>Crie uma Chave de API</h5>
                                <p>Siga estes passos:</p>
                                <ol>
                                    <li>Vá em "APIs e Serviços" > "Credenciais"</li>
                                    <li>Clique em "CRIAR CREDENCIAIS" > "Chave de API"</li>
                                    <li>Copie a chave gerada (ex: <code>AIzaSyB...</code>)</li>
                                </ol>
                                <div class="alert alert-info">
                                    <strong>Dica:</strong> A chave será algo como: <code>AIzaSyBvOkBwvQwQwQwQwQwQwQwQwQwQwQwQwQwQ</code>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Passo 5 -->
                <div class="card step-card">
                    <div class="card-body">
                        <div class="d-flex align-items-start">
                            <div class="step-number">5</div>
                            <div class="flex-grow-1">
                                <h5>Configure no Projeto</h5>
                                <p>Abra o arquivo <code>config/google_maps.php</code> e substitua a chave:</p>
                                
                                <div class="mb-3">
                                    <label for="apiKey" class="form-label">Cole sua chave da API aqui:</label>
                                    <input type="text" 
                                           id="apiKey" 
                                           class="form-control api-key-input" 
                                           placeholder="AIzaSyBvOkBwvQwQwQwQwQwQwQwQwQwQwQwQwQwQ"
                                           onchange="gerarCodigo()">
                                </div>
                                
                                <div id="codigoConfiguracao" style="display: none;">
                                    <h6>Substitua esta linha no arquivo <code>config/google_maps.php</code>:</h6>
                                    <pre class="bg-light p-3 rounded"><code id="codigoParaCopiar"></code></pre>
                                    <button class="btn btn-sm btn-outline-primary" onclick="copiarCodigo()">
                                        <i class="fas fa-copy me-1"></i>Copiar Código
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Passo 6 -->
                <div class="card step-card">
                    <div class="card-body">
                        <div class="d-flex align-items-start">
                            <div class="step-number">6</div>
                            <div class="flex-grow-1">
                                <h5>Teste a Configuração</h5>
                                <p>Após configurar, teste se está funcionando:</p>
                                <div class="d-grid gap-2 d-md-flex">
                                    <a href="test_api_key.php" class="btn btn-success" target="_blank">
                                        <i class="fas fa-vial me-2"></i>Testar API
                                    </a>
                                    <a href="app/views/calculadora_deslocamento.php" class="btn btn-primary" target="_blank">
                                        <i class="fas fa-route me-2"></i>Testar Calculadora
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Resultado Esperado -->
                <div class="card success-alert">
                    <div class="card-body">
                        <h5><i class="fas fa-check-circle me-2"></i>Resultado Esperado</h5>
                        <p>Após configurar corretamente, você verá:</p>
                        <ul>
                            <li>✅ <strong>Dados reais</strong> do Google Maps</li>
                            <li>✅ <strong>Linhas corretas</strong> de ônibus e metrô</li>
                            <li>✅ <strong>Tempos precisos</strong> baseados em informações atualizadas</li>
                            <li>✅ <strong>Geocodificação automática</strong> de endereços</li>
                        </ul>
                    </div>
                </div>

                <!-- Custos -->
                <div class="alert alert-info">
                    <h5><i class="fas fa-info-circle me-2"></i>Sobre Custos</h5>
                    <p class="mb-2">O Google oferece <strong>$200 USD de crédito gratuito</strong> por mês, que inclui:</p>
                    <ul class="mb-0">
                        <li>28.000 solicitações de Directions API</li>
                        <li>40.000 solicitações de Geocoding API</li>
                        <li>40.000 solicitações de Places API</li>
                    </ul>
                    <p class="mt-2 mb-0"><strong>Para uso pessoal/teste, é praticamente gratuito!</strong></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function gerarCodigo() {
            const apiKey = document.getElementById('apiKey').value.trim();
            if (apiKey && apiKey.length > 10) {
                const codigo = `define('GOOGLE_MAPS_API_KEY', '${apiKey}');`;
                document.getElementById('codigoParaCopiar').textContent = codigo;
                document.getElementById('codigoConfiguracao').style.display = 'block';
            } else {
                document.getElementById('codigoConfiguracao').style.display = 'none';
            }
        }

        function copiarCodigo() {
            const codigo = document.getElementById('codigoParaCopiar').textContent;
            navigator.clipboard.writeText(codigo).then(() => {
                alert('Código copiado! Agora cole no arquivo config/google_maps.php');
            });
        }
    </script>
</body>
</html>
